$(document).ready((function(){let i=!0;const t=function(t){let e=JSON.parse(window.localStorage.getItem("msg")),n={};for(const[i,m]of Object.entries(t))try{let i=JSON.parse(m.content);for(const[t,m]of Object.entries(i.stats))void 0===n[t]&&void 0!==e.stats[t]&&(n[t]={energyPrice_kwh:{min:9999999,max:0,avg:0,cnt:0,sum:0,me:e.stats[t].energyPrice_kwh},incomeSaldo:{min:9999999,max:0,avg:0,cnt:0,sum:0,me:e.stats[t].incomeSaldo}}),n[t].energyPrice_kwh.cnt++,n[t].energyPrice_kwh.sum+=m.energyPrice_kwh,n[t].incomeSaldo.cnt++,n[t].incomeSaldo.sum+=m.incomeSaldo,m.energyPrice_kwh<n[t].energyPrice_kwh.min&&(n[t].energyPrice_kwh.min=m.energyPrice_kwh),m.energyPrice_kwh>n[t].energyPrice_kwh.max&&(n[t].energyPrice_kwh.max=m.energyPrice_kwh)}catch(i){}for(const[i,t]of Object.entries(n))n[i].energyPrice_kwh.avg=n[i].energyPrice_kwh.sum/n[i].energyPrice_kwh.cnt,n[i].incomeSaldo.avg=n[i].incomeSaldo.sum/n[i].incomeSaldo.cnt;if(t.community=n,void 0===t.community)return;let m=$("#communityChart"),a=[],r=[],d=[];void 0!==t.community.last24h&&(a.push(t.community.last24h.energyPrice_kwh.min),r.push(t.community.last24h.energyPrice_kwh.me),d.push(t.community.last24h.energyPrice_kwh.max)),void 0!==t.community.last7d&&(a.push(t.community.last7d.energyPrice_kwh.min),r.push(t.community.last7d.energyPrice_kwh.me),d.push(t.community.last7d.energyPrice_kwh.max)),void 0!==t.community.last30d&&(a.push(t.community.last30d.energyPrice_kwh.min),r.push(t.community.last30d.energyPrice_kwh.me),d.push(t.community.last30d.energyPrice_kwh.max)),void 0!==t.community.last90d&&(a.push(t.community.last90d.energyPrice_kwh.min),r.push(t.community.last90d.energyPrice_kwh.me),d.push(t.community.last90d.energyPrice_kwh.max)),void 0!==t.community.last180d&&(a.push(t.community.last180d.energyPrice_kwh.min),r.push(t.community.last180d.energyPrice_kwh.me),d.push(t.community.last180d.energyPrice_kwh.max)),void 0!==t.community.last365d&&(a.push(t.community.last365d.energyPrice_kwh.min),r.push(t.community.last365d.energyPrice_kwh.me),d.push(t.community.last365d.energyPrice_kwh.max));new Chart(m,{type:"radar",data:{datasets:[{label:"Minimum",data:a,backgroundColor:"rgba(237,166,69,1)"},{label:"Ich",data:r,backgroundColor:"rgba(20,109,59.1)"},{label:"Maximum",data:d,backgroundColor:"rgba(192,192,192,1)"}],labels:["24 Stunden","7 Tage","30 Tage","90 Tage","180 Tage","365 Tage"]},options:{responsive:!0,legend:{position:"top"},plugins:{datalabels:{display:!0,color:"#000000",formatter:function(i,t){return""+i.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})}}},title:{display:!1,text:""},animation:{animateScale:i,animateRotate:i},tooltips:{enabled:!0,mode:"nearest",callbacks:{label:function(i,t){let e="Maximum";return 0==i.datasetIndex&&(e="Minimum"),1==i.datasetIndex&&(e="Ich"),e+":"+t.datasets[i.datasetIndex].data[i.index]+" €/kWh"}}},elements:{}}});i&&setTimeout((function(){$("#info").addClass("show")}),2e3);let o=e.stats.last24h.consumption_wh*e.meterinfo.energyPriceWh+e.stats.last24h.baseCosts,c=(Math.round(1e4*(1- -1*e.stats.last24h.incomeSaldo/o)),"");if(c+='<tr class="table-success" data-order=0><td>Ich</td>',void 0!==t.community.last24h?c+='<td data-order="'+t.community.last24h.energyPrice_kwh.me+'">'+t.community.last24h.energyPrice_kwh.me.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last7d?c+='<td data-order="'+t.community.last7d.energyPrice_kwh.me+'">'+t.community.last7d.energyPrice_kwh.me.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last30d?c+='<td data-order="'+t.community.last30d.energyPrice_kwh.me+'">'+t.community.last30d.energyPrice_kwh.me.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last365d?c+='<td data-order="'+t.community.last365d.energyPrice_kwh.me+'">'+t.community.last365d.energyPrice_kwh.me.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",c+="</tr>",c+="<tr><td data-order=1>Minimum</td>",void 0!==t.community.last24h?c+='<td data-order="'+t.community.last24h.energyPrice_kwh.min+'">'+t.community.last24h.energyPrice_kwh.min.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last7d?c+='<td data-order="'+t.community.last7d.energyPrice_kwh.min+'">'+t.community.last7d.energyPrice_kwh.min.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last30d?c+='<td data-order="'+t.community.last30d.energyPrice_kwh.min+'">'+t.community.last30d.energyPrice_kwh.min.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last365d?c+='<td data-order="'+t.community.last365d.energyPrice_kwh.min+'">'+t.community.last365d.energyPrice_kwh.min.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",c+="</tr>",c+="<tr><td data-order=2>Durchschnitt</td>",void 0!==t.community.last24h?c+='<td data-order="'+t.community.last24h.energyPrice_kwh.avg+'">'+t.community.last24h.energyPrice_kwh.avg.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last7d?c+='<td data-order="'+t.community.last7d.energyPrice_kwh.avg+'">'+t.community.last7d.energyPrice_kwh.avg.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last30d?c+='<td data-order="'+t.community.last30d.energyPrice_kwh.avg+'">'+t.community.last30d.energyPrice_kwh.avg.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last365d?c+='<td data-order="'+t.community.last365d.energyPrice_kwh.avg+'">'+t.community.last365d.energyPrice_kwh.avg.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",c+="</tr>",c+="<tr><td data-order=3>Maximum</td>",void 0!==t.community.last24h?c+='<td data-order="'+t.community.last24h.energyPrice_kwh.max+'">'+t.community.last24h.energyPrice_kwh.max.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last7d?c+='<td data-order="'+t.community.last7d.energyPrice_kwh.max+'">'+t.community.last7d.energyPrice_kwh.max.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last30d?c+='<td data-order="'+t.community.last30d.energyPrice_kwh.max+'">'+t.community.last30d.energyPrice_kwh.max.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",void 0!==t.community.last365d?c+='<td data-order="'+t.community.last365d.energyPrice_kwh.max+'">'+t.community.last365d.energyPrice_kwh.max.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>":c+="<td></td>",c+="</tr>",$("#ctable").html(c),i){$("table").DataTable({searching:!1,paging:!1,info:!1})}$("table").DataTable().order([1,"asc"]).draw(),window.swiper.removeAllSlides();let s=0;if(void 0!==t.community.last24h&&t.community.last24h.energyPrice_kwh.avg>t.community.last24h.energyPrice_kwh.me){s++;let i=Math.abs(Math.round(100*(1-t.community.last24h.energyPrice_kwh.me/t.community.last24h.energyPrice_kwh.avg)));window.swiper.appendSlide('<div class="blog-slider__item swiper-slide"><div class="blog-slider__content"><div class="blog-slider__title"><i class="fa fa-info-circle" style="  margin-right: 10px;"></i>24 Stunden Erfolg </div><div class="blog-slider__text" id="info0">Dein Strompreis war in den letzten 24 Stunden <strong>'+i+"% günstiger</strong> als durchschnittlich in der Community.</div></div></div>")}if(void 0!==t.community.last7d&&t.community.last7d.energyPrice_kwh.avg>t.community.last7d.energyPrice_kwh.me){s++;let i=Math.abs(Math.round(100*(1-t.community.last7d.energyPrice_kwh.me/t.community.last7d.energyPrice_kwh.avg)));window.swiper.appendSlide('<div class="blog-slider__item swiper-slide"><div class="blog-slider__content"><div class="blog-slider__title"><i class="fa fa-info-circle" style="  margin-right: 10px;"></i>7 Tage Erfolg </div><div class="blog-slider__text" id="info0">Dein Strompreis war in den letzten 7 Tagen <strong>'+i+"% günstiger</strong> als durchschnittlich in der Community.</div></div></div>")}if(void 0!==t.community.last30d&&t.community.last30d.energyPrice_kwh.avg>t.community.last30d.energyPrice_kwh.me){s++;let i=Math.abs(Math.round(100*(1-t.community.last30d.energyPrice_kwh.me/t.community.last30d.energyPrice_kwh.avg)));window.swiper.appendSlide('<div class="blog-slider__item swiper-slide"><div class="blog-slider__content"><div class="blog-slider__title"><i class="fa fa-info-circle" style="  margin-right: 10px;"></i>30 Tage Erfolg </div><div class="blog-slider__text" id="info0">Dein Strompreis war in den letzten 30 Tagen <strong>'+i+"% günstiger</strong> als durchschnittlich in der Community.</div></div></div>")}if(void 0!==t.community.last365d&&t.community.last365d.energyPrice_kwh.avg>t.community.last365d.energyPrice_kwh.me){s++;let i=Math.abs(Math.round(100*(1-t.community.last365d.energyPrice_kwh.me/t.community.last365d.energyPrice_kwh.avg)));window.swiper.appendSlide('<div class="blog-slider__item swiper-slide"><div class="blog-slider__content"><div class="blog-slider__title"><i class="fa fa-info-circle" style="  margin-right: 10px;"></i>365 Tage Erfolg </div><div class="blog-slider__text" id="info0">Dein Strompreis war in den letzten 365 Tagen <strong>'+i+"% günstiger</strong> als durchschnittlich in der Community.</div></div></div>")}0==s&&$("#info").hide(),i=!1},e=function(){$.getJSON("./p2p",t).fail((function(){$.getJSON("https://casa-corrently-demo.herokuapp.com/p2p",t)}))};setInterval(e,12e4),e(),$("#btnRadar").click((function(){$("#radar").modal()}))}));